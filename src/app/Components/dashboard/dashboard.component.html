
<div class="w-full md:w-[90%] lg:w-[80%] xl:w-[70%] 2xl:w-[60%] h-screen mt-8 m-auto px-2">
  <div class="grid h-full gap-3 md:gap-4 grid-cols-1 lg:grid-cols-4 auto-rows-min">

    <!-- Stats Section -->
    <div class="flex flex-wrap col-span-1 lg:col-span-4 gap-2 md:gap-3 justify-center">
      <div class="border-2 flex flex-col justify-center text-white bg-blue-400 flex-1 min-w-[140px] rounded-2xl p-2">
        <div class="text-center text-3xl md:text-5xl">{{stats.totalAdmins}}</div>
        <h1 class="text-center text-sm md:text-base font-extrabold">Total Admins</h1>
      </div>
      <div class="border-2 flex flex-col justify-center text-white bg-lime-400 flex-1 min-w-[140px] rounded-2xl p-2">
        <div class="text-center text-3xl md:text-5xl">{{stats.totalUsers}}</div>
        <h1 class="text-center text-sm md:text-base font-extrabold">Total Users</h1>
      </div>
      <div class="border-2 flex flex-col justify-center text-white bg-orange-400 flex-1 min-w-[140px] rounded-2xl p-2">
        <div class="text-center text-3xl md:text-5xl">{{stats.totalPosts}}</div>
        <h1 class="text-center text-sm md:text-base font-extrabold">Total Posts</h1>
      </div>
      <div class="border-2 flex flex-col justify-center text-white bg-black flex-1 min-w-[140px] rounded-2xl p-2">
        <div class="text-center text-3xl md:text-5xl">{{stats.totalStories}}</div>
        <h1 class="text-center text-sm md:text-base font-extrabold">Total Stories</h1>
      </div>
      <div class="border-2 flex flex-col justify-center text-white bg-teal-400 flex-1 min-w-[140px] rounded-2xl p-2">
        <div class="text-center text-3xl md:text-5xl">{{stats.totalComments}}</div>
        <h1 class="text-center text-sm md:text-base font-extrabold">Total Comments</h1>
      </div>
      <div class="border-2 flex flex-col justify-center text-white bg-red-400 flex-1 min-w-[140px] rounded-2xl p-2">
        <div class="text-center text-3xl md:text-5xl">{{stats.totalBanned}}</div>
        <h1 class="text-center text-sm md:text-base font-extrabold">Total Banned</h1>
      </div>
    </div>

    <!-- Content Area -->
    <div class="border-2 rounded-2xl col-span-1 lg:col-span-3 overflow-y-auto p-4 max-h-[70vh]">
      <!-- your ngSwitch content here (unchanged) -->

            <ng-container [ngSwitch]="selectedPage">

        <!-- USERS -->
        <div *ngSwitchCase="'users'">
          <h2 class="text-xl font-bold mb-2">Users</h2>
          <div *ngIf="loading">Loading users...</div>
          <ul *ngIf="!loading">
            <li *ngFor="let u of users"  class="flex gap-2 items-center border p-2 rounded mb-2">
              <img [routerLink]="['/main/user-profile',u.userId]"  *ngIf="u.profileImageUrl" [src]="u.profileImageUrl" class="w-10 h-10 rounded-full"/>
              <span class="flex items-center gap-1">
                {{ u.username }}
                <img *ngIf="u.varified" src="/varifiedLogo.png" class="w-4 h-4" alt="Verified" title="Verified"/>
              </span>
                <div class="ml-auto flex gap-2">
            <button *ngIf="!u.banned" (click)="banUser(u)" class="bg-red-500 text-white px-2 py-1 rounded">Ban</button>
            <button *ngIf="u.banned" (click)="unbanUser(u)" class="bg-green-500 text-white px-2 py-1 rounded">Unban</button>
            <button *ngIf="!u.varified" (click)="verifyUser(u)" class="bg-blue-500 text-white px-2 py-1 rounded">Verify</button>
            <button *ngIf="u.varified" (click)="unverifyUser(u)" class="bg-gray-500 text-white px-2 py-1 rounded">Unverify</button>
  </div>
            </li>
          </ul>
        </div>

        <!-- ADMINS -->
        <div *ngSwitchCase="'admins'">
          <h2 class="text-xl font-bold mb-2">Admins</h2>
          <div *ngIf="loading">Loading admins...</div>
          <ul *ngIf="!loading">
            <li *ngFor="let u of admins" class="flex gap-2 items-center border p-2 rounded mb-2">
              <img [routerLink]="['/main/user-profile',u.userId]"  *ngIf="u.profileImageUrl" [src]="u.profileImageUrl" class="w-10 h-10 rounded-full"/>
              <span class="flex items-center gap-1">
                {{ u.username }}
                <img *ngIf="u.varified" src="/varifiedLogo.png" class="w-4 h-4" alt="Verified" title="Verified"/>
              </span>
              <div class="ml-auto flex gap-2">
            <button *ngIf="!u.banned" (click)="banUser(u)" class="bg-red-500 text-white px-2 py-1 rounded">Ban</button>
            <button *ngIf="u.banned" (click)="unbanUser(u)" class="bg-green-500 text-white px-2 py-1 rounded">Unban</button>
            <button *ngIf="!u.varified" (click)="verifyUser(u)" class="bg-blue-500 text-white px-2 py-1 rounded">Verify</button>
            <button *ngIf="u.varified" (click)="unverifyUser(u)" class="bg-gray-500 text-white px-2 py-1 rounded">Unverify</button>
  </div>
            </li>
          </ul>
        </div>

        <!-- BANNED USERS -->
        <div *ngSwitchCase="'banned'">
          <h2 class="text-xl font-bold mb-2">Banned Users</h2>
          <div *ngIf="loading">Loading banned users...</div>
          <ul *ngIf="!loading">
            <li *ngFor="let u of bannedUsers" class="flex gap-2 items-center border p-2 rounded mb-2 text-red-600">
              <img *ngIf="u.profileImageUrl" [src]="u.profileImageUrl" class="w-10 h-10 rounded-full"/>
              <span class="flex items-center gap-1">
                {{ u.username }}
                <img *ngIf="u.varified" src="/varifiedLogo.png" class="w-4 h-4" alt="Verified" title="Verified"/>
              </span>
            </li>
          </ul>
        </div>

        <!-- POSTS -->
      <!-- POSTS -->
<div *ngSwitchCase="'posts'">
  <h2 class="text-xl font-bold mb-2">Posts</h2>
  <div *ngIf="loading">Loading posts...</div>

  <div *ngIf="!loading" class="grid gap-3 sm:grid-cols-2 md:grid-cols-3">
    <div *ngFor="let post of posts"
         class="border p-3 rounded-lg shadow-sm hover:shadow-md transition 
                flex flex-col gap-2 relative"
         [class.opacity-50]="post.userIsBanned">

      <!-- User Info -->
      <p class="flex items-center gap-1">
        <strong>{{ post.userName }}</strong>
        <img *ngIf="post.varified" src="/varifiedLogo.png"
             class="w-4 h-4" alt="Verified" title="Verified"/>
      </p>

      <!-- Post Image -->
      <img [src]="post.imageUrl" 
           class="w-full h-48 object-cover rounded-lg" />

      <!-- Caption -->
      <p class="text-sm text-gray-700 italic break-words">
        {{ post?.caption || 'No caption provided' }}
      </p>

      <!-- Timestamp -->
      <p class="text-xs text-gray-500">{{ post.createdAt | date:'short' }}</p>

      <!-- Actions -->
      <div class="flex gap-2 mt-auto">
        <button (click)="true" 
                class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
          Update
        </button>
        <button (click)="true" 
                class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>

<!-- STORIES -->
<div *ngSwitchCase="'stories'">
  <h2 class="text-xl font-bold mb-2">Stories</h2>
  <div *ngIf="loading">Loading stories...</div>

  <div *ngIf="!loading" class="grid gap-3 sm:grid-cols-2 md:grid-cols-3">
    <div *ngFor="let story of stories"
         class="border p-3 rounded-lg shadow-sm hover:shadow-md transition flex flex-col gap-2"
         [class.opacity-50]="story.userIsBanned">

      <!-- User Info -->
      <p class="flex items-center gap-1">
        <strong>{{ story.userName }}</strong>
        <img *ngIf="story.varified" src="/varifiedLogo.png"
             class="w-4 h-4" alt="Verified" title="Verified"/>
      </p>

      <!-- Story Image -->
      <img [src]="story.imageUrl" 
           class="w-full h-48 object-cover rounded-lg" />

      <!-- Timestamp -->
      <p class="text-xs text-gray-500">{{ story.createdAt | date:'short' }}</p>

      <!-- Delete Button -->
      <div class="flex">
        <button (click)="true" 
                class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>

        <!-- COMMENTS -->
        <div *ngSwitchCase="'comments'">
          <h2 class="text-xl font-bold mb-2">Comments</h2>
          <div *ngIf="loading">Loading comments...</div>
          <div *ngIf="!loading">
            <div *ngFor="let c of comments" class="border p-2 mb-2 rounded" [class.opacity-50]="c.userIsBanned">
              <p class="flex items-center gap-1">
                <strong>{{ c.userName }}</strong>
                <img *ngIf="c.varified" src="/varifiedLogo.png" class="w-4 h-4" alt="Verified" title="Verified"/>
              </p>
              <p>{{ c.commentText }}</p>
              <p class="text-xs text-gray-500">{{ c.createdAt | date:'short' }}</p>
            </div>
          </div>
        </div>

       <!-- CREATE ADMIN -->
<div *ngSwitchCase="'createAdmin'">
  <h2 class="text-xl font-bold mb-4">Create New Admin</h2>

  <form #adminForm="ngForm" (ngSubmit)="createAdmin()" class="space-y-3">
    <div>
      <input type="text" [(ngModel)]="newAdmin.username" name="username" placeholder="Username"
             class="w-full border rounded px-2 py-1" required />
    </div>
    <div>
      <input type="password" [(ngModel)]="newAdmin.password" name="password" placeholder="Password"
             class="w-full border rounded px-2 py-1" required />
    </div>
    <div>
      <input type="text" [(ngModel)]="newAdmin.fullName" name="fullName" placeholder="Full Name"
             class="w-full border rounded px-2 py-1" required />
    </div>
    <div>
      <input type="email" [(ngModel)]="newAdmin.email" name="email" placeholder="Email"
             class="w-full border rounded px-2 py-1" required />
    </div>
    <div>
      <input type="text" [(ngModel)]="newAdmin.profileImageUrl" name="profileImageUrl" placeholder="Profile Image URL (optional)"
             class="w-full border rounded px-2 py-1" />
    </div>

    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
      Create Admin
    </button>
  </form>

  <div *ngIf="successMessage" class="text-green-600 mt-2">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="text-red-600 mt-2">{{ errorMessage }}</div>
</div>


        <div *ngSwitchDefault>Select an option from the sidebar.</div>
      </ng-container>
    
    </div>

    <!-- Sidebar -->
    <div class="border-2 rounded-2xl col-span-1 order-first lg:order-last">
      <ul class="px-5 flex lg:flex-col flex-row lg:gap-2 gap-1 my-3 lg:my-5 overflow-x-auto lg:overflow-visible">
        <li (click)="setPage('users')" [class.bg-teal-600]="selectedPage === 'users'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">USERS</li>
        <li (click)="setPage('admins')" [class.bg-teal-600]="selectedPage === 'admins'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">ADMINS</li>
        <li (click)="setPage('banned')" [class.bg-teal-600]="selectedPage === 'banned'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">BANNED</li>
        <li (click)="setPage('posts')" [class.bg-teal-600]="selectedPage === 'posts'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">POSTS</li>
        <li (click)="setPage('stories')" [class.bg-teal-600]="selectedPage === 'stories'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">STORIES</li>
        <li (click)="setPage('comments')" [class.bg-teal-600]="selectedPage === 'comments'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">COMMENTS</li>
        <li (click)="setPage('createAdmin')" [class.bg-teal-600]="selectedPage === 'createAdmin'"
            class="cursor-pointer bg-teal-400 hover:bg-teal-500 px-3 py-2 rounded-2xl text-white whitespace-nowrap">CREATE ADMIN</li>
      </ul>
    </div>
  </div>
</div>
